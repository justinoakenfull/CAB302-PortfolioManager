<?xml version="1.0" encoding="UTF-8"?>
<!--
  Portfolio View FXML
  - Shows portfolio value, composition pie chart, and searchable holdings table.
  - Controller: PortfolioController.java
-->

<?import javafx.scene.chart.PieChart?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.javarepowizards.portfoliomanager.controllers.portfolio.PortfolioController"
            style="-fx-background-color: #2E2E2E;">

    <!-- === RIGHT PANEL: Stock Information === -->
    <right>
        <VBox spacing="10" style="-fx-padding: 20;">
            <!-- Section Header -->
            <Label text="Stock Information"
                   style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-underline: true; -fx-text-fill: white;" />
            <!-- AI-generated info goes here -->
            <TextArea fx:id="infoArea"
                      promptText="AI GENERATED INFORMATION FOR STOCK"
                      editable="false"
                      wrapText="true"
                      prefHeight="300"
                      style="-fx-background-color: #1E1E1E; -fx-text-fill: white;" />
        </VBox>
    </right>

    <!-- === CENTER PANEL: Portfolio Overview === -->
    <center>
        <VBox spacing="20" alignment="CENTER" style="-fx-padding: 30;">

            <!-- Portfolio Value Display -->
            <Label text="Portfolio Value"
                   style="-fx-font-size: 18px; -fx-text-fill: white;" />
            <Label fx:id="valueLabel"
                   text="Place Holder"
                   style="-fx-font-size: 24px; -fx-text-fill: white;" />

            <!-- Portfolio Composition Pie Chart -->
            <PieChart fx:id="portfolioPieChart"
                      title="Composition"
                      legendSide="BOTTOM"
                      labelsVisible="true"
                      labelLineLength="25"
                      prefWidth="600"
                      prefHeight="600"
                      style="-fx-background-color: transparent;" />

            <!-- Portfolio Change Indicator -->
            <Label fx:id="changeLabel"
                   text="Portfolio Change: -3%"
                   style="-fx-text-fill: red;" />

            <!-- === Search Box === -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <!-- TODO: set search icon image -->
                <ImageView fx:id="searchIcon"
                           fitHeight="20"
                           fitWidth="20" />
                <TextField fx:id="searchField"
                           promptText="Search for Stock"
                           style="-fx-background-color: #1E1E1E; -fx-text-fill: white;" />
            </HBox>

            <!-- === Stock Table === -->
            <TableView fx:id="portfolioTable"
                       prefWidth="500"
                       style="-fx-background-color: white;">
                <columns>
                    <TableColumn fx:id="stockColumn"
                                 text="Stock"
                                 prefWidth="150" />
                    <TableColumn fx:id="changeColumn"
                                 text="24h Change"
                                 prefWidth="150" />
                    <TableColumn fx:id="balanceColumn"
                                 text="Balance"
                                 prefWidth="150" />
                </columns>
            </TableView>

        </VBox>
    </center>

</BorderPane>