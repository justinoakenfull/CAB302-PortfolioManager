<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.geometry.Insets?>

<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.StackPane?>
<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.javarepowizards.portfoliomanager.controllers.simulation.SimulationController"
            stylesheets="@simulation.css"
            prefWidth="1200.0" prefHeight="800.0"
            style="-fx-background-color: #2A2A2A;">

    <!-- CENTER: VBox containing chart, simulation settings, and output box  -->
    <center>
        <VBox spacing="10" style="-fx-padding: 10;">
            <!-- LineChart with black border and rounded corners 656565-->
            <LineChart fx:id="portfolioLineChart" prefWidth="900" prefHeight="650"
                       style="-fx-background-color: #39393939;
                              -fx-border-color: #000000;
                              -fx-border-width: 2px;
                              -fx-background-radius: 10;
                              -fx-border-radius: 10;">
                <xAxis>
                    <NumberAxis fx:id="xAxis" label="Simulation Day"
                                style="-fx-tick-label-fill: #FFFFFF;
                                "/>
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="yAxis" label="Portfolio Value ($)"
                                style="-fx-tick-label-fill: #FFFFFF; "/>
                </yAxis>
            </LineChart>

            <!-- Simulation Settings: HBox with black border and rounded corners -->
            <HBox spacing="15" alignment="CENTER"
                  style="-fx-background-color: #39393939;
                         -fx-border-color: #000000;
                         -fx-border-width: 2px;
                         -fx-background-radius: 10;
                         -fx-border-radius: 10;
                         -fx-padding: 10;">
                <Label text="Simulation Days:" style="-fx-text-fill: #FFFFFF;"/>
                <Slider fx:id="sliderSimulationDays" min="1" max="365" value="365"
                        showTickLabels="true" showTickMarks="true" majorTickUnit="30" minorTickCount="4" blockIncrement="1" prefWidth="600"/>
                <Button fx:id="btnRunSimulation" text="Run Simulation"
                        style="-fx-background-color: #39393939;
                               -fx-text-fill: #FFFFFF;
                               -fx-font-weight: bold;
                               -fx-padding: 8 16;
                               -fx-background-radius: 8;
                               -fx-border-radius: 8;"/>
            </HBox>

            <!-- Output Box: HBox with metrics and  AI  -->
            <HBox spacing="10"
                  prefHeight="250"
                  style="-fx-background-color: #39393939;
             -fx-border-color: #000000;
             -fx-border-width: 2px;
             -fx-background-radius: 10;
             -fx-border-radius: 10;
             -fx-padding: 10;">

                <!-- Left side: Metrics VBox  -->
                <VBox spacing="5"
                      alignment="TOP_LEFT"
                      prefWidth="200"
                      minWidth="200"
                      maxWidth="200"
                    VBox.vgrow="NEVER">
                    <Label text="Sharpe Ratio:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
                    <Label fx:id="labelSharpeRatio" style="-fx-text-fill: #FFFFFF;"/>
                    <Label text="Volatility:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
                    <Label fx:id="labelVolatility" style="-fx-text-fill: #FFFFFF;"/>
                    <Label text="Cumulative Return:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
                    <Label fx:id="labelCumulativeReturn" style="-fx-text-fill: #FFFFFF;"/>
                </VBox>

                <!-- Right side: AI Review + Spinner  -->
                <StackPane fx:id="aiContainer"
                           alignment="CENTER"
                           HBox.hgrow="ALWAYS"
                           style="-fx-background-color: #39393939;
                    -fx-padding: 10;
                    -fx-background-radius: 10;">

                    <!-- ScrollPane  -->
                    <ScrollPane fx:id="scrollReview"
                                fitToWidth="true"
                                fitToHeight="false"
                                hbarPolicy="NEVER"
                                vbarPolicy="AS_NEEDED"
                                HBox.hgrow="ALWAYS"
                                VBox.vgrow="ALWAYS"
                                style="-fx-background-color: transparent;
                       -fx-border-color: transparent;">
                        <content>
                            <Label fx:id="labelReview"
                                   wrapText="true"
                                   style="-fx-text-fill: #FFFFFF; -fx-font-size: 14px;"/>
                        </content>
                    </ScrollPane>

                    <!-- Centered spinner -->
                    <ProgressIndicator fx:id="progressIndicator"
                                       visible="false"
                                       prefWidth="40"
                                       prefHeight="40"/>
                </StackPane>
            </HBox>


        </VBox>
    </center>

    <!-- RIGHT: Portfolio Overview Panel with black border and rounded corners -->
    <right>
        <VBox spacing="10" style="-fx-padding: 10;
                                 -fx-background-color: #39393939;
                                 -fx-border-color: #000000;
                                 -fx-border-width: 2px;
                                 -fx-background-radius: 10;
                                 -fx-border-radius: 10;" prefWidth="300">
            <BorderPane.margin>
                <Insets top="10" right="10" bottom="10" left="0"/>
            </BorderPane.margin>

            <Label text="Holdings:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
            <ListView fx:id="listHoldings" prefHeight="200"
                      style="-fx-background-color: #656565; -fx-control-inner-background: #656565; -fx-text-fill: #FFFFFF;"/>
            <Label text="Cash Balance:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
            <Label fx:id="labelBalance" style="-fx-text-fill: #FFFFFF;"/>
            <Label text="Holdings:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
            <Label fx:id="labelHoldings" style="-fx-text-fill: #FFFFFF;"/>
            <Label text="Portfolio:" style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;"/>
            <Label fx:id="labelPortfolioValue" style="-fx-text-fill: #FFFFFF;"/>
        </VBox>
    </right>

</BorderPane>
